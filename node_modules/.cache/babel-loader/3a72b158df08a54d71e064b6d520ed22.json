{"remainingRequest":"C:\\work\\求索2019\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\求索2019\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\work\\求索2019\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\求索2019\\admin\\src\\views\\task\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\求索2019\\admin\\src\\views\\task\\index.vue","mtime":1580983008806},{"path":"C:\\work\\求索2019\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\求索2019\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\求索2019\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\求索2019\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:\\\\work\\\\\\u6C42\\u7D222019\\\\admin\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"C:\\\\work\\\\\\u6C42\\u7D222019\\\\admin\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/objectSpread2\"));\n\nvar _vuex = require(\"vuex\");\n\nvar _uschool = require(\"@/api/uschool\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'Task',\n  data: function data() {\n    return {\n      data: [],\n      schedule: [],\n      visible1: true,\n      visible2: false,\n      activeNames: '',\n      user: {\n        user_invited_tick: 0,\n        coin: 0,\n        name: ''\n      },\n      keep_time: 0,\n      number: '',\n      unit: '',\n      book_name: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.requestData();\n    (0, _uschool.getBook)().then(function (res) {\n      if (res.status === 0) {\n        var book = JSON.parse(res.data);\n        _this.data = book;\n      }\n    });\n  },\n  computed: (0, _objectSpread2.default)({}, (0, _vuex.mapGetters)(['coin', 'name'])),\n  methods: {\n    handleWriting: function handleWriting(number, unit, book_name) {\n      var _this2 = this;\n\n      this.$confirm('确定开启第' + unit + '单元任务,将消耗15金币(请在开启任务前认真阅读下面公告)', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        center: true\n      }).then(function () {\n        (0, _uschool.makeQuestion)({\n          bookName: book_name,\n          unit: unit,\n          bookNumber: number,\n          taskType: 0,\n          keepTime: 0\n        }).then(function (res) {\n          if (res.status === 0) {\n            _this2.$message({\n              message: '任务添加成功,请在任务记录查看进度',\n              type: 'success'\n            });\n\n            _this2.requestData();\n          } else if (res.status === 1) {\n            _this2.$message({\n              message: res.msg,\n              type: 'warning'\n            });\n          } else {\n            _this2.visible1 = false;\n\n            _this2.$message.error('服务器异常，请稍后再试');\n          }\n        });\n      }).catch(function () {});\n    },\n    handleSelect: function handleSelect(number, unit, book_name) {\n      this.number = number;\n      this.unit = unit;\n      this.book_name = book_name;\n      this.visible2 = true;\n    },\n    requestData: function requestData() {\n      this.$store.dispatch('user/getUserInfo');\n    },\n    handleBrushTime: function handleBrushTime() {\n      var _this3 = this;\n\n      (0, _uschool.makeQuestion)({\n        bookName: this.book_name,\n        unit: this.unit,\n        bookNumber: this.number,\n        taskType: 1,\n        keepTime: this.keep_time\n      }).then(function (res) {\n        if (res.status === 0) {\n          _this3.$message({\n            message: '任务添加成功,请在任务记录查看进度',\n            type: 'success'\n          });\n\n          _this3.requestData();\n        }\n      });\n    },\n    getQueryVariable: function getQueryVariable(url, variable) {\n      var query = url.split('?')[1];\n      var vars = query.split('&');\n\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split('=');\n\n        if (pair[0] === variable) {\n          return pair[1];\n        }\n      }\n\n      return '';\n    },\n    handleChange: function handleChange(index) {\n      console.log(index);\n\n      if (this.data[index]) {\n        if (this.schedule.some(function (item) {\n          return item.index === index;\n        })) {\n          return;\n        }\n      }\n    },\n    getPercentage: function getPercentage(index, index2) {\n      var percentage = 0;\n      this.schedule.map(function (item) {\n        if (item.index === index) {\n          percentage = item.data[index2].unitProgress;\n          return;\n        }\n      });\n      return percentage;\n    },\n    getScore: function getScore(index, index2) {\n      var score = 0;\n      this.schedule.map(function (item) {\n        if (item.index === index) {\n          score = item.data[index2].unitScore;\n          return;\n        }\n      });\n      return score;\n    }\n  }\n};\nexports.default = _default;",null]}