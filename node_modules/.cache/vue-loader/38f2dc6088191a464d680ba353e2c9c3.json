{"remainingRequest":"F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\src\\views\\task\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\src\\views\\task\\index.vue","mtime":1572323257292},{"path":"F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\工作2\\新建文件夹 (2)\\autoComplete\\vue-admin-template\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport { getInfo } from '@/api/user'\nimport { mapGetters } from 'vuex'\naxios.defaults.withCredentials = true\nexport default {\n  name: 'Task',\n  data() {\n    return {\n      visible1: false,\n      activeNames: ['1'],\n      user: {\n        user_invited_tick: 0,\n        coin: 0,\n        name:''\n      },\n      percentage: 0,\n      status: ''\n    }\n  },\n  created() {\n    this.requestData()\n  },\n  computed: {\n    ...mapGetters([\n      'coin',\n      'name'\n    ])\n  },\n  methods: {\n    handleWriting(couse_id, unit) {\n      this.$confirm('确定开启第' + unit + '单元任务,将消耗15金币', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(() => {\n        this.percentage = 0\n        this.status = ''\n        const timer = window.setInterval(e => {\n          const step = Math.ceil((100 - this.percentage) / 40)\n          if (this.percentage + step > 99) {\n            this.percentage = 99\n            clearInterval(timer)\n          } else {\n            this.percentage += step\n          }\n        }, 500)\n        this.visible1 = true\n         axios.get('http://autohomework.top/user/money', { params: {\n        // axios.get('http://127.0.0.1:3333/user/money', { params: {\n          couse_id: couse_id,\n          unit: unit,\n          operate: 2\n        }}).then(res => {\n          if (res.data.status == 1) {\n            this.$message({ message: '任务成功，已完成第' + unit + '单元', type: 'success' })\n            clearInterval(timer)\n            this.percentage = 100\n            this.status = 'success'\n            window.setTimeout(e => this.visible1 = false, 1000)\n            this.requestData()\n          } else if (res.data.status == 0) {\n            this.status = 'exception'\n            window.setTimeout(e => this.visible1 = false, 1000)\n            this.$message({ message: res.data.msg, type: 'warning' })\n          } else {\n            this.visible1 = false\n            this.$message.error('服务器异常，请稍后再试')\n          }\n        })\n      }).catch(() => {\n      })\n    },\n    requestData() {\n      this.$store.dispatch('user/getInfo')\n      // getInfo().then(res => {\n      //   const user = eval('(' + res.data + ')')\n      //   this.user.coin = user.user_money\n      //   this.user.user_invited_tick = user.user_invited_tick\n      //   this.user.name = user.user_name\n\n      // })\n\n    }\n  }\n}\n",null]}